{% assign sorted = site.pages | sort:"url" %}

{% for node in sorted offset:1 %}
{{node.url}}<br>
  {% assign slugs = node.url | split: '/' %}
  {% assign depth = node.url | split: '/' | size | minus:1 %}
  {% for each in depth %}{{each | split: "" | uniq | sort: "weight" }}{% endfor %}
  {% for slug in slugs offset:1 %}
    {% if (forloop.index) == (depth) %}{{slug}}{% endif %}<br>
  {% endfor %}
{% endfor %}
